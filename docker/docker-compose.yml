version: "3.0"
services:
  influxdb:
    image: "influxdb:1.8"
    restart: always
    ports:
      - "9977:8086"
    environment:
      - INFLUXDB_HTTP_AUTH_ENABLED=false
    volumes:
      - influxdb:/var/lib/influxdb

  grafana:
    build: grafana/.
    restart: always
    ports:
      - "3333:3000"
    volumes:
      - grafanadb:/var/lib/grafana

  python-sharepoint:
    # in order to build you need to create a hard link to downloader_backend.py and requirements.txt
    # to ./sharepoint/code location
    build: sharepoint/.
    restart: always
    environment:
      # do not forget to set these envs on the host
      - client_id=${client_id}
      - client_secret=${client_secret}
    volumes:
      - ./settings:/settings

volumes:
  influxdb:
  grafanadb:

